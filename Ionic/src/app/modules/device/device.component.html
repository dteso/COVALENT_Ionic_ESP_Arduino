<ion-content scrollY="true" class="abel custom-bg">
  <!-- <pre style="color: white;">{{ state | json}}</pre>
  <h4 style="color: white;">Count: {{count}}</h4> -->
  <ion-row>
    <ion-card class="abel w-100" style="background: transparent;">
      <ion-card-content>
        <div class="text-center p-2">
          <h1 style="font-size: 3rem; font-weight: bolder; color: whitesmoke; margin-top: 1.250rem"> D E V I C E </h1>
          <h2 *ngIf="statusService.state.name" style="font-size: 2rem; font-weight: bolder; color: whitesmoke;"> {{statusService.state.name}} </h2>
        </div>

        <div class="text-center p-2">
          <ion-button *ngIf="!showNameDeviceInput" color="secondary" shape="round" fill="outline"
            (click)="showNameDeviceInput = !showNameDeviceInput">
            <ion-col size="2">
              <ion-icon name="save-outline"></ion-icon>
            </ion-col>
            <ion-col size="10">
              SAVE DEVICE
            </ion-col>
          </ion-button>

          <ion-row *ngIf="showNameDeviceInput" class="text-center">
            <ion-col size='12'>
              <ion-item style="background: white; background-color: white !important;">
                <ion-input type="text" class="w-100 text-center abel" [(ngModel)]="deviceName" name="deviceName"></ion-input>
              </ion-item>
            </ion-col>
            <div>
              <ion-button color="danger" shape="round" fill="outline" (click)="showNameDeviceInput = !showNameDeviceInput">
                <ion-icon name="close-outline"></ion-icon>
              </ion-button>
              <ion-button color="success" shape="round" fill="outline" (click)="storeConfig()">
                <ion-icon name="checkmark-outline"></ion-icon>
              </ion-button>
            </div>
          </ion-row>
        </div>

        <ion-row style="background: transparent !important; color:  white;" class="text-center">
          <ion-col class="w-100"><strong>{{statusService.state?.mcu}}</strong></ion-col>
        </ion-row>

        
        <ion-row style="background: transparent !important; color:  white;" class="text-center">
          <ion-col class="w-100">{{statusService.state?.deviceMAC}}</ion-col>
        </ion-row>

        <ion-row class="text-center" *ngIf="readingData">
          <ion-col size='12'>
            <ion-spinner name="dots" color="warning"></ion-spinner>
          </ion-col>
          <ion-col size="12" style="color: orange;">
            Reading from device
          </ion-col>
        </ion-row>

        <div class="mt-3" style="background: transparent;">
          <!-- BLUETOOTH -->
          <ion-item lines="none">
            <!-- state-btn -->
            <ion-button *ngIf="statusService.state.bluetoothConnected" shape="round" color="primary">
              <ion-icon name="bluetooth"></ion-icon>
            </ion-button>
            <ion-button *ngIf="!statusService.state.bluetoothConnected" fill="outline" shape="round" color="light">
              <ion-icon name="bluetooth"></ion-icon>
            </ion-button>

            <!-- value-btn -->
            <ion-button *ngIf="statusService.state.bluetoothConnected" shape="round" color="primary"
              [routerLink]="['/setup']" routerLinkActive="router-link-active" class="w-100">
              {{statusService.state.bluetoothId}}
            </ion-button>
            <ion-button *ngIf="!statusService.state.bluetoothConnected" fill="outline" shape="round" color="light"
              [routerLink]="['/setup']" routerLinkActive="router-link-active" class="w-100">
              Bluetooth
            </ion-button>

            <ion-button *ngIf="statusService.state.bluetoothConnected" shape="round" color="primary">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button *ngIf="!statusService.state.bluetoothConnected" fill="outline" shape="round" color="light">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- SERIAL -->
          <ion-item lines="none">
            <ion-button fill="outline" shape="round" *ngIf="!statusService.state.serialConnected" color="light">
              <ion-icon name="terminal"></ion-icon>
            </ion-button>
            <ion-button shape="round" *ngIf="statusService.state.serialConnected" color="primary">
              <ion-icon name="terminal"></ion-icon>
            </ion-button>

            <ion-button *ngIf="!statusService.state.serialConnected" color="light" fill="outline" shape="round"
              [routerLink]="['/terminal-tabs']" routerLinkActive="router-link-active" class="w-100">
              Serial
            </ion-button>
            <ion-button *ngIf="statusService.state.serialConnected" color="primary" shape="round"
              [routerLink]="['/terminal-tabs']" routerLinkActive="router-link-active" class="w-100">
              115200baud
            </ion-button>

            <ion-button fill="outline" shape="round" *ngIf="!statusService.state.serialConnected" color="light">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button shape="round" *ngIf="statusService.state.serialConnected" color="primary">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- NETWORK -->
          <ion-item lines="none">
            <ion-button *ngIf="statusService.state.wifiConnected && statusService.state.bluetoothConnected"
              color="primary" shape="round" [routerLink]="['/network']" routerLinkActive="router-link-active">
              <ion-icon name="wifi"></ion-icon>
            </ion-button>
            <ion-button fill="outline"
              *ngIf="!statusService.state.wifiConnected || !statusService.state.bluetoothConnected" color="light"
              shape="round" [routerLink]="['/network']" routerLinkActive="router-link-active">
              <ion-icon name="wifi"></ion-icon>
            </ion-button>

            <ion-button *ngIf="statusService.state.wifiConnected && statusService.state.bluetoothConnected"
              shape="round" color="primary" [routerLink]="['/network']" routerLinkActive="router-link-active"
              class="w-100">
              {{statusService.state.wifiSSID}}
            </ion-button>
            <ion-button *ngIf="!statusService.state.wifiConnected || !statusService.state.bluetoothConnected"
              fill="outline" shape="round" color="light" [routerLink]="['/network']"
              routerLinkActive="router-link-active" class="w-100">
              WiFi Network
            </ion-button>

            <ion-button *ngIf="!statusService.state.wifiConnected || !statusService.state.bluetoothConnected"
              fill="outline" shape="round" color="light">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.wifiConnected && statusService.state.bluetoothConnected"
              shape="round" color="primary">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- NTP -->
          <ion-item lines="none">
            <ion-button *ngIf="!statusService.state.ntpEnabled" fill="outline" shape="round" [routerLink]="['/device']"
              color="light" routerLinkActive="router-link-active">
              <ion-icon name="time"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.ntpEnabled" shape="round" [routerLink]="['/device']" color="primary"
              routerLinkActive="router-link-active">
              <ion-icon name="time"></ion-icon>
            </ion-button>

            <ion-button fill="outline" *ngIf="!statusService.state.ntpEnabled || !statusService.state.wifiConnected" shape="round" [routerLink]="['/device']"
              color="light" routerLinkActive="router-link-active" class="w-100">
              NTP
            </ion-button>
            <ion-button *ngIf="statusService.state.ntpEnabled && statusService.state.wifiConnected" shape="round" [routerLink]="['/device']" color="primary"
              routerLinkActive="router-link-active" class="w-100">
              {{statusService.state.ntpData}}
            </ion-button>

            <ion-button fill="outline" *ngIf="!statusService.state.ntpEnabled" color="light" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.ntpEnabled" color="primary" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- EEPROM -->
          <ion-item lines="none">
            <ion-button fill="outline"
              *ngIf="!statusService.state.serialConnected && !statusService.state.bluetoothConnected" color="light"
              shape="round" [routerLink]="['/eeprom']" routerLinkActive="router-link-active">
              <ion-icon name="hardware-chip"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.serialConnected || statusService.state.bluetoothConnected"
              color="primary" shape="round" [routerLink]="['/eeprom']" routerLinkActive="router-link-active">
              <ion-icon name="hardware-chip"></ion-icon>
            </ion-button>

            <ion-button fill="outline"
              *ngIf="!statusService.state.serialConnected && !statusService.state.bluetoothConnected" color="light"
              shape="round" [routerLink]="['/eeprom']" routerLinkActive="router-link-active" class="w-100">
              EEPROM
            </ion-button>
            <ion-button *ngIf="statusService.state.serialConnected || statusService.state.bluetoothConnected"
              color="primary" shape="round" [routerLink]="['/eeprom']" routerLinkActive="router-link-active"
              class="w-100">
              EEPROM [ 1024 bytes ]
            </ion-button>

            <ion-button *ngIf="statusService.state.serialConnected || statusService.state.bluetoothConnected"
              color="primary" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button fill="outline"
              *ngIf="!statusService.state.serialConnected && !statusService.state.bluetoothConnected" color="light"
              shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- WEB SERVER -->
          <ion-item lines="none">
            <ion-button *ngIf="statusService.state.webServerEnabled && statusService.state.localIp" color="primary"
              shape="round" [routerLink]="['/web-server']" routerLinkActive="router-link-active">
              <ion-icon name="earth"></ion-icon>
            </ion-button>
            <ion-button fill="outline" *ngIf="!statusService.state.webServerEnabled" color="light" shape="round"
              [routerLink]="['/web-server']" routerLinkActive="router-link-active">
              <ion-icon name="earth"></ion-icon>
            </ion-button>

            <ion-button *ngIf="statusService.state.webServerEnabled && statusService.state.localIp" color="primary"
              shape="round" [routerLink]="['/web-server']" routerLinkActive="router-link-active" class="w-100">
              {{statusService.state.localIp}}
            </ion-button>
            <ion-button fill="outline" *ngIf="!statusService.state.webServerEnabled" color="light" shape="round"
              [routerLink]="['/web-server']" routerLinkActive="router-link-active" class="w-100">
              Web Server
            </ion-button>

            <ion-button *ngIf="statusService.state.webServerEnabled && statusService.state.localIp" color="primary"
              shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button fill="outline" *ngIf="!statusService.state.webServerEnabled" color="light" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- WEATHER -->
          <ion-item lines="none">
            <ion-button
              *ngIf="statusService.state.temperature.length === 0 && statusService.state.temperature.length === 0"
              fill="outline" shape="round" color="light" [routerLink]="['/weather']"
              routerLinkActive="router-link-active">
              <ion-icon name="thermometer"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.temperature.length > 0 && statusService.state.temperature.length > 0"
              shape="round" color="primary" [routerLink]="['/weather']" routerLinkActive="router-link-active">
              <ion-icon name="thermometer"></ion-icon>
            </ion-button>

            <ion-button
              *ngIf="statusService.state.temperature.length === 0 && statusService.state.temperature.length === 0"
              fill="outline" shape="round" color="light" [routerLink]="['/weather']"
              routerLinkActive="router-link-active" class="w-100">
              Weather
            </ion-button>
            <ion-button *ngIf="statusService.state.temperature.length > 0 && statusService.state.temperature.length > 0"
              shape="round" color="primary" [routerLink]="['/weather']" routerLinkActive="router-link-active"
              class="w-100">
              {{statusService.state.temperature}} ÂºC - {{statusService.state.humidity}} %
            </ion-button>

            <ion-button
              *ngIf="statusService.state.temperature.length === 0 && statusService.state.temperature.length === 0"
              fill="outline" shape="round" color="light">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
            <ion-button *ngIf="statusService.state.temperature.length > 0 && statusService.state.temperature.length > 0"
              shape="round" color="primary">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- DISPLAY -->
          <ion-item lines="none">
            <ion-button fill="outline" shape="round" color="light" [routerLink]="['/device']"
              routerLinkActive="router-link-active">
              <ion-icon name="tablet-landscape"></ion-icon>
            </ion-button>
            <ion-button fill="outline" shape="round" color="light" [routerLink]="['/device']"
              routerLinkActive="router-link-active" class="w-100">
              Display
            </ion-button>
            <ion-button fill="outline" color="light" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>

          <!-- SETUP -->
          <ion-item lines="none">
            <ion-button fill="outline" shape="round" color="light" [routerLink]="['/device']"
              routerLinkActive="router-link-active">
              <ion-icon name="pulse"></ion-icon>
            </ion-button>
            <ion-button fill="outline" shape="round" color="light" [routerLink]="['/device']"
              routerLinkActive="router-link-active" class="w-100">
              Configuration
            </ion-button>
            <ion-button fill="outline" color="light" shape="round">
              <ion-icon name="infinite-outline"></ion-icon>
            </ion-button>
          </ion-item>
        </div>

      </ion-card-content>
    </ion-card>
  </ion-row>
</ion-content>