<div class="txt-white">
  {{connectedDevices}}
</div>


<ion-content>
  <ion-card *ngFor="let device of storedDevices" class="abel" style="border: 3px solid white ">
    <ion-card-header style="display: flex !important; border-bottom: 0.5px solid white;">
      <ion-col size='9'>
        <div style="font-size: 1.5rem; color: white !important;"><strong>{{device.name | uppercase}}</strong></div>
        <div>Device MAC: {{device.deviceMAC}}</div>
        <div>BT MAC: {{device.bluetoothId}}</div>
      </ion-col>
      <ion-col size='3' style="font-size: larger !important;" class="text-center">
        <div *ngIf="device.online else offline">
          <div style="color: #2dd36f;"><strong>ONLINE</strong></div>
          <ion-icon name="wifi-outline" color="success" style="font-size: 3rem;"></ion-icon>
        </div>
        <ng-template #offline>
          <ion-icon name="close-outline" color="light" style="font-size: 3rem;"></ion-icon>
          <div style="color: lightgray;">OFFLINE</div>
        </ng-template>
      </ion-col>
    </ion-card-header>
    <ion-card-content class="text-center">
      <ion-row *ngIf="device.online" class="text-center">
        <ion-col size='6' style="padding-top: 1.5rem;">
          <div>IP: {{device.localIp}}</div>
          <p>WiFi: {{device.wifiSSID}}</p>
          <ion-row>
            <ion-col size='6' class="text-center text-white">
              <ion-icon name="thermometer-outline" style="font-size: 1.625rem;"></ion-icon>
              <mwl-gauge class="custom-mwl-gauge" [max]="50" [dialStartAngle]="180" [dialEndAngle]="0"
                [value]="device.temperature" [animated]="true" [animationDuration]="2">
              </mwl-gauge>
              ºC
            </ion-col>
            <ion-col size='6' class="text-center text-white">
              <ion-icon name="water-outline" style="font-size: 1.625rem;"></ion-icon>
              <mwl-gauge class="custom-mwl-gauge" [max]="100" [dialStartAngle]="-90" [dialEndAngle]="-90.001"
                [showValue]="true" [value]="device.humidity" [animated]="true" [animationDuration]="1">
              </mwl-gauge>
              %
            </ion-col>
          </ion-row>
        </ion-col>

        <ion-col size='6' style="padding-top: 1.5rem;">
          <ion-button color="warning" fill="outline" class="w-100 h-60" (click)="onAction1(i, device)">
            <ion-icon name="bulb-outline" style="font-size: 3rem;"></ion-icon>
          </ion-button>

          <!-- botón bluetooth disponible -->
          <ion-button *ngIf="getBluetoothActiveStatus(device.bluetoothId) && !getActiveBluetooth(device.bluetoothId) && !device.connectingByBluetooth" (click)="bluetoothConnection(device.bluetoothId)" fill="outline"
            color="secondary" class="w-100">
            <ion-icon name="bluetooth-outline" style="font-size: 2rem;"></ion-icon>
          </ion-button>

          <!-- botón bluetooth conectado -->
          <ion-button *ngIf="getActiveBluetooth(device.bluetoothId) && (!device.connectingByBluetooth || !device.searchingBluetooth)" (click)="bluetoothConnection(device.bluetoothId)" color="secondary"
            class="w-100">
            <ion-icon name="bluetooth-outline" style="font-size: 2rem;"></ion-icon>
          </ion-button>

          <!-- buscando bluetooth -->
          <ion-row class="text-center" *ngIf="device.searchingBluetooth">
            <ion-col size="7" style="color: rgb(12, 188, 219);">
              Searching
            </ion-col>
            <ion-col size='5'>
              <ion-spinner name="dots" color="secondary"></ion-spinner>
            </ion-col>
          </ion-row>

          <!-- botón bluetooth conectando -->
          <ion-row class="text-center" *ngIf="device.connectingByBluetooth">
            <ion-col size="7" style="color: orange;">
              Connecting
            </ion-col>
            <ion-col size='5'>
              <ion-spinner name="dots" color="warning"></ion-spinner>
            </ion-col>
          </ion-row>

          <!-- mensaje bluetooth error -->
            <ion-col size="12" class="text-center" *ngIf="device.connectionError" style="color: rgb(192, 9, 88);">
              Error.Please retry
            </ion-col>

        </ion-col>
      </ion-row>
    </ion-card-content>
  </ion-card>
</ion-content>